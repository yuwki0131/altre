# 未決定事項のQA表(MVP設計時)

## ギャップバッファ設計関連

### Q1. ギャップサイズの初期値
**質問**: ギャップバッファの初期ギャップサイズはどの程度にすべきか？
**背景**: README.mdでは「設計段階で考慮」とされているが、具体的な値が未定
**選択肢**:
- 小さめ（1KB）: メモリ効率重視
- 中程度（4KB）: バランス型
- 大きめ（16KB）: 挿入性能重視
**影響**: 初期メモリ使用量と挿入操作のパフォーマンスに影響

#### Answer

- 中程度（4KB）: バランス型にしましょう。実際に中程度で作ったあと、動作確認で検証し、性能上の課題がある場合は再検討します。

### Q2. 大きなファイルでの性能要件
**質問**: 数MBのファイルに対してどの程度の応答性能を求めるか？
**背景**: MVPでの性能目標が未定義
**選択肢**:
- 基本的な編集操作（挿入・削除）: < 10ms
- カーソル移動: < 1ms
- ファイル読み込み: < 100ms
**影響**: メモリ効率とのトレードオフ、実装複雑度

#### Answer

- カーソル移動: < 1msでお願いします。


### Q3. メモリ使用量の上限設定
**質問**: 単一ファイルでのメモリ使用量の上限を設けるか？
**背景**: リソース制限のないファイルサイズでの動作保証
**選択肢**:
- 制限なし（ファイルサイズに比例）
- 固定上限（例: 100MB）
- 動的制限（システムメモリの割合）
**影響**: OOM対策、大きなファイルでの動作保証

#### Answer

- 動的制限（システムメモリの割合）でやってみましょう。

## キーバインド設計関連

### Q4. キーマップ階層
**質問**: MVPでは単一階層のキーマップで十分か？
**背景**: タスクでは「キーマップ階層（MVP では単一階層でOK？）」と記載
**選択肢**:
- 単一階層: シンプルな実装、拡張性は後回し
- 階層構造: 将来のモード（編集・ビューなど）に対応
- 混合: 基本は単一、C-xプレフィックスのみ特別扱い
**影響**: 実装複雑度、将来の拡張性、メモリ使用量

#### Answer

- 混合: 基本は単一、C-xプレフィックスのみ特別扱い

混合ですね。save file, open file, exitを実現するためには多層改装対応が必要になると思います。ただ、階層構造まではまだ突き詰めなくて良いです。


### Q5. OS/IME衝突回避の実装範囲
**質問**: OS固有のキーバインドやIME処理との衝突をどの程度考慮するか？
**背景**: ターミナルエディタでの実装範囲の明確化が必要
**選択肢**:
- 最小限: 明らかな衝突のみ回避（Ctrl+C、Ctrl+Z等）
- 中程度: 一般的なOS/IME衝突を文書化・回避
- 積極的: プラットフォーム固有の詳細対応
**影響**: 実装工数、ユーザー体験、メンテナンス負荷

#### Answer

- 最小限: 明らかな衝突のみ回避（Ctrl+C、Ctrl+Z等）

最小限としてください。MVPの実現を優先しましょう。


### Q6. 不正キー入力時の動作詳細
**質問**: 不正なキー入力や部分マッチ時の具体的な動作は？
**背景**: 「無視」の詳細仕様が未定義
**選択肢**:
- サイレント無視: 何も表示せず無視
- ステータス表示: ミニバッファに「Unknown key」等を表示
- ビープ音: 音声フィードバック（可能であれば）
- ログ記録: 開発・デバッグ用に記録
**影響**: ユーザー体験、デバッグ効率

#### Answer

- サイレント無視: 何も表示せず無視

サイレント無視の意図でした。まぁ、たしかにEmacsは反応しますね。ここは将来的にはEmacsからは離れたい思想になります。

## ミニバッファ設計関連

### Q7. ミニバッファのレイアウト位置
**質問**: ミニバッファを画面のどの位置に配置するか？
**背景**: UI設計での基本的な配置決定が必要
**選択肢**:
- 画面下部固定: Emacs標準、ステータスライン統合
- 画面上部: 現代的なエディタ風
- フローティング: ポップアップ式
- 可変: 設定で変更可能
**影響**: 実装複雑度、ユーザー体験、他UI要素との連携

#### Answer

- 画面上部: 現代的なエディタ風

画面上部にしましょう。視線的に、画面上部の方が見やすいです。


### Q8. 補完候補の表示数上限
**質問**: ファイルパス補完で同時に表示する候補数の上限は？
**背景**: パフォーマンスとユーザビリティのバランス
**選択肢**:
- 少数（10個）: シンプル、高速
- 中程度（50個）: バランス型
- 多数（200個）: 情報豊富、低速
- 無制限: 全候補表示、スクロール対応
**影響**: メモリ使用量、描画性能、操作性

#### Answer

- 中程度（50個）: バランス型

多すぎるとつらいのでこれくらいで

### Q9. 履歴機能の詳細範囲
**質問**: MVPでの履歴機能はどの程度実装するか？
**背景**: タスクでは「簡易版」とされているが詳細が未定
**選択肢**:
- 最小限: セッション内のみ、保存なし
- 基本: ファイル保存、最大100件
- 完全: 永続化、検索機能、カテゴリ分け
**影響**: 実装工数、ストレージ要件、ユーザー体験

#### Answer

- 最小限: セッション内のみ、保存なし

これで大丈夫です。

### Q10. エラーメッセージの表示時間
**質問**: ミニバッファでのエラーメッセージ表示時間は？
**背景**: 自動消去とユーザビリティのバランス
**選択肢**:
- 短時間（2秒）: 素早いフィードバック
- 中程度（5秒）: 読取り時間確保
- ユーザー操作まで: 明示的な消去が必要
- 設定可能: ユーザーが調整
**影響**: ユーザー体験、実装複雑度

#### Answer

- 中程度（5秒）: 読取り時間確保

一旦これで行きましょう。ただし、将来的にはalispで自由に設定可能な機能とする想定です。

## エラーハンドリング設計関連

### Q11. 致命的エラー時の動作方針
**質問**: 致命的エラー（メモリ不足、システムリソース不足等）が発生した際の動作方針は？
**背景**: アプリケーションの安定性とユーザーデータ保護のバランスが必要
**選択肢**:
- 即座に強制終了: 安全重視、データ保護優先
- 復旧試行後に終了: ユーザビリティ重視、自動保存試行
- ユーザー選択: エラー時に選択肢を提示
- グレースフル終了: 可能な限りクリーンアップして終了
**影響**: ユーザー体験、データ安全性、実装複雑度

#### Answer

- 即座に強制終了: 安全重視、データ保護優先

MVPではこれでお願いします。将来的にはよりよいあり方を探りたいですが、再優先事項ではありません。

### Q12. デバッグ情報の表示レベル
**質問**: 開発時およびユーザー向けのデバッグ情報表示レベルをどう設定するか？
**背景**: 開発効率とユーザー体験のバランスが必要
**選択肢**:
- 最小限: エラーメッセージのみ、技術詳細は非表示
- 開発者向け: 詳細なスタックトレース、ファイル名・行番号表示
- 段階的: 環境変数や設定で詳細度を調整可能
- ユーザー選択: 設定でデバッグモードの有効/無効を選択
**影響**: デバッグ効率、ユーザー混乱の回避、実装複雑度

#### Answer

- 開発者向け: 詳細なスタックトレース、ファイル名・行番号表示

MVPは開発者向けに最適化しましょう。将来的なフェーズでユーザビリティを実ユーザ目線に合わせていきます。

## TUIレイアウト設計関連

### Q13. ターミナル最小サイズ要件
**質問**: アプリケーションが動作する最小ターミナルサイズはどの程度にすべきか？
**背景**: 小さなターミナルでの使用時の動作保証とユーザビリティのバランス
**選択肢**:
- 極小（40x10）: 小さなペインでも動作
- 小（60x15）: 基本的な編集作業が可能
- 中（80x24）: 標準的なターミナルサイズ
- 大（100x30）: 快適な編集環境
**影響**: UI実装複雑度、エラーハンドリング、ユーザビリティ

#### Answer

- 小（60x15）: 基本的な編集作業が可能

まぁ、一応、最低限スタートにしましょう。

### Q14. 色対応レベル
**質問**: ターミナルの色対応はどの程度まで対応するか？
**背景**: 様々なターミナル環境での動作保証と視認性のバランス
**選択肢**:
- 基本（8色）: 古いターミナルでも動作、シンプル
- 拡張（16色）: 一般的な色分けが可能
- 高色（256色）: 豊富な色表現、現代的
- True Color（24bit）: 最高品質、一部ターミナルで非対応
**影響**: 視認性、対応ターミナル範囲、実装複雑度

#### Answer

- 拡張（16色）: 一般的な色分けが可能

一般的で大丈夫です。基本モダンLinux以外で動かす想定はないので。

### Q15. 日本語文字幅対応の必要性
**質問**: 日本語などの全角文字の表示幅計算への対応レベルは？
**背景**: 日本語テキスト編集時の正確な表示とカーソル位置計算
**選択肢**:
- 最小限: ASCII のみ正確、日本語は概算
- 基本: 一般的な全角文字を正確に計算
- 完全: 結合文字、異体字セレクタ等も対応
- Unicode 準拠: 最新Unicode仕様に完全準拠
**影響**: 日本語編集の正確性、実装複雑度、パフォーマンス

#### Answer

- 基本: 一般的な全角文字を正確に計算

基本で。

## ファイル操作設計関連

### Q16. バックアップファイル作成方針
**質問**: ファイル保存時のバックアップファイル作成方針はどうするか？
**背景**: データ保護とディスク使用量のバランスが必要
**選択肢**:
- なし: バックアップファイルを作成しない（シンプル）
- ~suffix: file.txt → file.txt~（Emacs標準）
- .bak拡張子: file.txt → file.txt.bak（一般的）
- タイムスタンプ: file.txt → file.txt.2025-01-01-120000（詳細）
**影響**: ディスク使用量、データ復旧可能性、実装複雑度

#### Answer

- なし: バックアップファイルを作成しない（シンプル）

これはなしで。未来永劫なしでいいです。ただ、将来的にはalispで自由に設定可能な機能とはしたいと思っています。

### Q17. 大きなファイルの読み込み時間制限
**質問**: 数MBのファイル読み込み時に時間制限を設けるか？
**背景**: UI応答性とファイルサイズ対応のバランス
**選択肢**:
- 制限なし: どんなサイズでも読み込み（応答性低下リスク）
- 時間制限: 5秒以上かかる場合は中断・警告
- サイズ制限: 10MB以上のファイルは警告・確認
- プログレス表示: 大きなファイルは進捗表示
**影響**: ユーザー体験、メモリ使用量、実装複雑度

#### Answer

- 制限なし: どんなサイズでも読み込み（応答性低下リスク）

ですが、将来的にはここは調整したいです。

### Q18. シンボリックリンクファイルの対応範囲
**質問**: シンボリックリンクファイルへの対応レベルは？
**背景**: Linuxでのシンボリックリンク使用頻度とセキュリティ考慮
**選択肢**:
- 非対応: シンボリックリンクはエラー扱い
- 基本対応: リンク先ファイルを直接編集
- 完全対応: リンク・リンク先の状態を適切に管理
- 選択式: リンク編集かリンク先編集かをユーザーが選択
**影響**: 実装複雑度、セキュリティリスク、ユーザビリティ

#### Answer

- 基本対応: リンク先ファイルを直接編集

微妙ですが、これとしてください。方針は将来的にはもう少し整理したいかなと思っていますが、MVPではこれでお願いします。

### Q19. 権限不足ファイルの読み取り専用モード対応
**質問**: 書き込み権限のないファイルを開いた際の動作は？
**背景**: 設定ファイル確認など読み取り専用での閲覧ニーズ
**選択肢**:
- エラー終了: 権限不足で開けない旨を表示
- 読み取り専用モード: 表示のみ可能、編集は無効
- 警告継続: 警告表示後、編集可能だが保存時エラー
- 権限昇格: sudo等での権限昇格を提案
**影響**: ユーザビリティ、セキュリティ、実装複雑度

#### Answer

- エラー終了: 権限不足で開けない旨を表示

エラー表示で大丈夫です。ただ、エディタ自体を終了するのではなく、エラーメッセージを表示して処理を終了する(エディタ自体は終了しない)仕様としてください。

### Q20. 同時編集検出・警告機能の必要性
**質問**: 他のプロセスが同じファイルを編集中の検出機能は必要か？
**背景**: データ競合防止とMVPでの実装優先度
**選択肢**:
- 不要: MVPでは非対応、将来実装
- 簡易検出: ファイル変更時刻での競合検出
- ファイルロック: 編集開始時にロックファイル作成
- 高度な検出: inotifyによるリアルタイム検出
**影響**: データ整合性、実装工数、MVPスコープ

#### Answer

- 不要: MVPでは非対応、将来実装

これで大丈夫です。

## ナビゲーション設計関連

### Q21. Tab文字の表示幅設定
**質問**: Tab文字の表示幅をどのように設定するか？
**背景**: ナビゲーション設計でTab文字の表示幅考慮が必要
**選択肢**:
- 4スペース: 現代的な標準、コンパクト
- 8スペース: 伝統的なUnix標準
- 設定可能: ユーザーが選択（将来実装）
**影響**: カーソル移動の計算、画面表示、ファイル互換性

#### Answer

- 4スペース: 現代的な標準、コンパクト
をデフォルトとし、MVPではこれで実装してください。将来的には「」設定可能: ユーザーが選択（将来実装）」を目指します。

### Q22. 長い行でのパフォーマンス対応
**質問**: 非常に長い行（数千文字）での移動パフォーマンスをどう対応するか？
**背景**: 大きなJSONファイルやminifiedファイルでの動作保証
**選択肢**:
- 制限なし: 行長に関係なく同じ性能目標
- 段階的制限: 長い行では多少の性能劣化を許容
- 行長制限: 特定の長さ以上は警告・制限
**影響**: カーソル移動の応答性、メモリ使用量

#### Answer

- 段階的制限: 長い行では多少の性能劣化を許容
MVPではこれを目指します。この仕様で問題がある場合は、将来的に再検討します。

### Q23. 画面外移動時のスクロール方針
**質問**: カーソルが画面外に移動した際のスクロール動作は？
**背景**: ユーザー体験とパフォーマンスのバランス
**選択肢**:
- 最小スクロール: カーソルが見える最小限の移動
- 中央配置: カーソルを画面中央に配置
- 段階的: 移動方向に応じて適応的に調整
**影響**: ユーザビリティ、画面描画頻度、実装複雑度

#### Answer

- 中央配置: カーソルを画面中央に配置
これにします。
