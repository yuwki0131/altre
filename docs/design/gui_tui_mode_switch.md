# GUI/TUIモード切替設計（改訂メモ）

## 現状（2025-03-15）
- altre は ratatui 製 TUI のみを提供し、CLI フラグによるモード切替は行わない。  
- 旧 Slint ベース GUI および `--gui` / `--tui` 系オプションは削除済み。  
- 実行は `cargo run` もしくは `altre` の単一パスのみで起動し、TUI をそのまま立ち上げる。

## Tauri 移行後の検討課題
Tauri ベース GUI を再導入する際に以下の観点で設計を再検討する。

1. **バイナリ構成**  
   - 単一バイナリで `--gui` フラグにより Tauri を起動するか、GUI/TUI を別バイナリとして分離するかを決定する。  
   - CLI からの自動テストや headless 実行を想定する場合、IPC やバックエンド起動プロセスの扱いを整理する。

2. **設定・起動パラメータ**  
   - `--gui` / `--tui` 以外に、デバッグログ出力先や headless モードなど追加パラメータの必要性を洗い出す。  
   - Tauri アプリが利用する設定ファイルの場所や形式を既存 TUI 設定と整合させる。

3. **フォールバック戦略**  
   - GUI 起動失敗時に自動で TUI へ切り替えるか、明示的なエラー終了とするかを定義する。  
   - CLI 実行環境（Codex CLI 等）では TUI を優先起動する方針を維持する。

4. **テスト自動化**  
   - Tauri のエンドツーエンドテストをどのように CLI から実行するか（`tauri-driver` / `tauri-cli` / 自前スクリプトなど）を決める。  
   - 既存の `cargo test`・`cargo bench` と干渉しないワークフローを整備する。

## 次のアクション
- Tauri アーキテクチャの調査結果を `docs/design/` に追加し、依存パッケージやビルドフローのドラフトを作成する。  
- CLI オプション仕様が固まり次第、本ドキュメントを正式版として更新し、`manuals/` と `README.md` に反映する。
