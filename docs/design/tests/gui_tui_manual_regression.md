# GUI/TUI手動回帰チェックリスト

バックエンド共通化と GUI/TUI 並行提供後のリリース前確認として実施する手動テストのチェックリストです。主要機能の正常性を確認し、想定外の退行を検知します。

## 実施環境記録
- モード: GUI / TUI
- OS / バージョン:
- ディスプレイサーバ: Wayland / X11 / Windows / macOS
- altre バージョン / commit:
- 実施日 / 担当者:
- 使用フォント / IME:

## 共通項目

### 起動・終了
- [ ] `altre` 起動（GUIデフォルト）が成功し、ウィンドウ/画面が表示される。
- [ ] `altre --tui` で TUI が起動し、端末が raw mode / alternate screen に入る。
- [ ] `C-x C-c` により両モードで終了でき、TUI は端末設定を復帰する。
- [ ] 異常終了時のエラーメッセージがユーザに分かりやすく表示される。

### 基本編集
- [ ] 文字入力・削除（Backspace/Delete）が動作。
- [ ] 改行・タブ挿入が期待通り。
- [ ] `Ctrl`+`f`/`b`/`n`/`p`、`Ctrl`+`a`/`e` でカーソル移動。
- [ ] `M-f`/`M-b`、`M-<`/`M->` が機能。
- [ ] マーク設定（`C-SPC`）と選択範囲ハイライトが表示。
- [ ] キルリング操作（`C-w`、`M-w`、`C-y`、`M-y`）が動作。

### ファイル操作
- [ ] `C-x C-f` でファイルを開く、存在しないファイルの場合は新規作成確認。
- [ ] パス補完が表示され選択できる（GUIではリスト、TUIではリスト表示）。
- [ ] `C-x C-s` で保存、`write-file` で別名保存。
- [ ] ファイル保存失敗（権限なし等）の場合にミニバッファでエラー表示。

### 検索・置換
- [ ] `C-s` / `C-r` でインクリメンタルサーチ開始、ハイライト表示。
- [ ] `M-%` など置換コマンドが利用可能（GUIではダイアログではなくミニバッファ）。
- [ ] 検索中の `C-g` でキャンセルし、元の状態に戻る。

### ミニバッファ
- [ ] `M-x` でコマンド実行モードが開く。
- [ ] `M-:` で alisp 式入力が可能（評価結果が表示）。
- [ ] メッセージ／エラーの表示タイムアウト（3秒/5秒）が動作。

### ウィンドウ/レイアウト
- [ ] `C-x 2` / `C-x 3` で分割、`C-x 1` / `C-x 0` で元に戻る。
- [ ] ウィンドウ間移動 (`C-x o`) が動作。
- [ ] 画面リサイズに追従する（GUI ウィンドウサイズ変更／TUI 端末サイズ変更）。

### Undo/Redo
- [ ] `C-/` で直前操作が戻る。
- [ ] `C-.` で再実行。

### パフォーマンス・安定性
- [ ] 1MB 程度のファイルを開き、スクロールが滑らか。
- [ ] 長時間（10分以上）操作してもクラッシュやメモリリーク兆候がない。
- [ ] ログ（`ALTRE_DEBUG=1`）に異常が出力されない。

## GUI 専用項目
- [ ] ウィンドウフォーカス喪失・復帰で描画が崩れない。
- [ ] DPI スケーリングが適用されたディスプレイでレイアウトが崩れない。
- [ ] マウスホイールスクロールが動作（実装済みの場合）。
- [ ] タイトルバーやウィンドウアイコンが期待通り。

## TUI 専用項目
- [ ] 端末を終了した際にカーソルが表示状態に戻る。
- [ ] マウス入力が無効化されている（必要に応じて）。
- [ ] 端末リサイズ時に描画が更新される。

## 不具合記録テンプレート
```
### 発生条件
- モード:
- OS / 端末 / IME:
- 再現手順:

### 現象
- 期待した挙動:
- 実際の挙動:

### 補足
- ログ抜粋:
- スクリーンショット:
```

## 実施サイクル
- 新機能導入後／リリース前に実施。
- 重大不具合修正後に再チェック。
- IME チェックリストと合わせて結果を `tasks/proceeding` の各タスクに記録。
