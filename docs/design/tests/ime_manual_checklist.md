# IME手動検証チェックリスト

GUI/TUI 両モードで日本語 IME を中心とした文字入力の挙動を確認する際のチェック項目です。各 OS / ディスプレイサーバ組み合わせごとに実施し、結果を記録してください。

## 実施環境記録
- 実行モード: `GUI` / `TUI`
- OS / バージョン:
- ディスプレイサーバ: Wayland (Hyprland / GNOME / etc.) / X11 / Windows / macOS
- IME 種別: fcitx5 / ibus / MS-IME / ATOK / Apple 日本語入力 など
- altre バージョン / commit:
- 実施日 / 担当者:

## 手順と確認事項

### 1. 基本入力
- [ ] 平仮名入力で「こんにちは」と入力し、漢字に変換 → 確定するとテキストに反映される。
- [ ] 変換候補選択中に `Esc` または `Ctrl+g` を押下するとプリエディットがキャンセルされる。
- [ ] 連続入力時に変換候補が正しく更新される（例: 「Alt」「Emacs」など）。

### 2. 半角/全角切替
- [ ] `半角/全角` キー（Windows）または `Ctrl+Space`（macOS/Linux）で英数 ↔ ひらがなが切り替えられる。
- [ ] 切替後の入力が期待通り（英数字または日本語）になる。
- [ ] 切替操作が altre のキーバインドと衝突しない。

### 3. 英数入力
- [ ] 英数字を直接入力し、カーソル位置やバッファ内容が正しく更新される。
- [ ] `Shift+Space` 等でスペース入力した場合、期待通りの全角/半角スペースが挿入される。

### 4. プリエディット表示
- [ ] IME 変換中の文字列がカーソル位置でハイライト表示される（GUI）／バッファに仮表示される（TUI）。
- [ ] プリエディット中に `Backspace` / `Delete` が反映される。
- [ ] プリエディット状態でカーソル移動 (`Left/Right`) が動作し、IME による移動と干渉しない。

### 5. ショートカットとの共存
- [ ] IME 有効時に `Ctrl+f`, `Ctrl+b`, `Ctrl+g` など altre 固有のショートカットが期待通り動作する。
- [ ] IME のショートカット（変換確定、再変換など）が altre の処理に阻害されない。

### 6. エッジケース
- [ ] カーソルが行末/行頭にある状態での変換・確定が正しく行われる。
- [ ] マルチバイト文字（絵文字、拡張漢字）が正しく入力・表示される。
- [ ] 連続して高速に入力してもバッファ内容が破損しない。
- [ ] エラーメッセージやミニバッファ表示が IME と競合しない（GUI）。

## 不具合記録テンプレート
```
### 発生条件
- OS / IME:
- altre モード: GUI / TUI
- 入力手順:

### 現象
- 期待した挙動:
- 実際の挙動:

### 付随情報
- ログ抜粋:
- スクリーンショット / スクリーンレコーディング:
```

## 補足
- ログ採取のため、必要に応じて `ALTRE_DEBUG=1` を設定してください。
- GUI/TUI 回帰テスト実装タスクと連携し、継続的なチェックを行います。
