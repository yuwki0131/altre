# エラーハンドリング実装

## タスク概要
設計仕様に基づいてアプリケーション全体のエラーハンドリングシステムを実装する。

## 目的
- 統一されたエラー型階層の実装
- 開発者向け詳細エラー情報の表示（QA Q12）
- 致命的エラー時の即座終了（QA Q11）
- ユーザーフレンドリーなエラーメッセージシステム

## 実装対象
1. **エラー型定義**
   - `AltreError`とサブエラー型の実装
   - `thiserror`を使った構造化エラー定義
   - エラー変換（From trait）の実装

2. **エラー表示システム**
   - ミニバッファでのエラー表示（5秒間）
   - エラーレベル別の表示スタイル
   - 日本語エラーメッセージ辞書

3. **ログシステム**
   - 開発者向け詳細ログ（stderr出力）
   - エラーレポート生成機能
   - スタックトレース取得

4. **パニック処理**
   - パニックハンドラの設定
   - 致命的エラー時の即座終了処理
   - 安全なエラー復旧機能

## 成果物
- `src/error.rs` - 完全実装
- `src/logging.rs` - ログシステム
- エラーメッセージ辞書
- エラーハンドリングテスト

## 前提条件
- 06_error_handling_design.mdの完了
- QA.mdの回答（Q10, Q11, Q12）

## 完了条件
- [x] AltreError型階層の実装完了
- [x] エラー表示システムの実装
- [x] ログシステムの実装
- [x] パニックハンドラの設定
- [x] Result型の一貫した使用
- [x] エラーメッセージ辞書の作成
- [ ] 全テストの成功

## 実施内容メモ
- `src/logging.rs` を新設し、開発者向けロガーとログレベルを定義
- `src/error.rs` にメッセージ辞書、エラーレポート、ログ連携処理、テストを追加
- エントリポイントでパニックハンドラを初期化
- `cargo run --offline` でビルドを確認（ネットワーク制限のため `cargo test` は未実行）

## 見積もり
**期間**: 2-3日
**優先度**: 最高（基盤機能）

## 関連タスク
- 06_error_handling_design.md（前提）
- 他の全MVP実装タスク（基盤として使用）

## 技術的考慮事項
- QA回答に基づく方針（開発者向け最適化、致命的エラー即座終了）
- anyhowとthiserrorを使った現代的エラー処理
- パフォーマンスへの影響を最小限に抑制
- 将来のユーザビリティ向上への対応
