# DONE: バッファ管理コマンド (`C-x b` / `C-x k` / `C-x C-b`)

## 実施内容
- `App` 内に複数バッファを保持する仕組みを導入し、パス・内容・カーソル位置を `OpenBuffer` として管理。切り替え時にエディタ状態を保存/復元するよう調整。
- `C-x b` / `C-x k` / `C-x C-b` をモダン／レガシー双方のキーマップへ追加。`Action`/`Command` 列挙体と `Command::from_string` を拡張し、ミニバッファ登録済みコマンドと整合。
- ミニバッファにバッファ切り替え用モードと削除用モードを新設し、候補補完と既定値（直前のバッファ/カレントバッファ）を提供。`SystemResponse` にバッファ操作用バリアントを追加し、アプリ側で実処理を実行。
- `App::switch_buffer` / `kill_buffer` / `buffer_names` / `current_buffer_name` を公開し、テストや将来の UI から状態取得が可能に。既存のファイル保存処理を複数バッファ対応に合わせて再実装。
- バッファ一覧表示（`C-x C-b`）ではミニバッファに簡易リストを表示。最後のバッファは削除できない／未保存バッファは削除拒否とし、エラーメッセージを表示。
- 新規テスト `app/tests/buffer_management_tests.rs` でバッファ切り替え・削除・キーマップを検証。既存のキーバインド統合テストも更新。
- マニュアル（`manuals/user_guide.md` / `manuals/keybinding_reference.md`）と `CommandCompletion` 初期コマンド群を更新し、新コマンドの説明を追記。

## 決定事項・メモ
- バッファは現在エディタ内でシリアライズされたテキストと `FileBuffer` を利用して保存/復元する。今後の改善で `BufferManager` との統合や表示バッファ切替を検討。
- `kill-buffer` 実行時は最後のバッファを守り、未保存バッファは削除前にエラーを表示する（確認ダイアログは未実装）。
- `list-buffers` は当面ミニバッファへのテキスト表示で代替し、専用ビューは将来の課題。

## 残課題
- 異なるウィンドウで別バッファを表示する機能との連携。
- バッファ補完をより高度（部分一致や既存順）にする UI 改善。
- バッファ一覧を専用パネルで表示する UI 実装。
