# 基本編集コア機能実装

## タスク概要
基本編集設計に基づいてテキスト編集のコア機能を実装する。

## 目的
- 高性能（< 1ms）なテキスト編集操作の実現
- UTF-8文字境界での安全な操作保証
- ギャップバッファとの効率的な統合
- 将来のアンドゥ・リドゥ機能への準備

## 実装対象
1. **テキスト入力システム**
   - 文字入力処理の実装
   - 入力文字検証（制御文字除外）
   - 高速連続入力対応のバッファリング
   - UTF-8安全性の保証

2. **削除操作システム**
   - Backspace削除（カーソル前削除）
   - Delete削除（カーソル後削除）
   - UTF-8文字境界での安全な削除
   - 範囲削除の基盤実装

3. **改行処理システム**
   - LF統一ポリシーの実装
   - 改行挿入とカーソル移動
   - 改行コードの正規化処理

4. **カーソル状態管理**
   - ギャップバッファとの位置同期
   - 境界値処理とクランプ
   - 行・列位置の効率的な再計算

5. **変更通知システム**
   - 編集操作の記録（アンドゥ準備）
   - リアルタイム表示更新
   - 変更イベントの配信

## 成果物
- `src/editor/text_editor.rs` - メインエディタ
- `src/editor/edit_operations.rs` - 編集操作
- `src/editor/change_notifier.rs` - 変更通知
- `src/editor/input_buffer.rs` - 入力バッファ
- 包括的なテストスイート

## 前提条件
- 08_basic_editing_design.mdの完了
- ギャップバッファ実装の完了
- エラーハンドリング実装の完了

## 完了条件
- [ ] TextEditorの完全実装
- [ ] EditOperationsトレイトの実装
- [ ] 文字入力システムの実装
- [ ] 削除操作システムの実装
- [ ] 改行処理システムの実装
- [ ] カーソル状態管理の実装
- [ ] 変更通知システムの実装
- [ ] UTF-8安全性の保証
- [ ] パフォーマンス目標の達成（< 1ms）
- [ ] 全テストの成功

## 見積もり
**期間**: 3-4日
**優先度**: 最高（コア機能）

## 関連タスク
- 08_basic_editing_design.md（前提）
- 03_gap_buffer_implementation.md（前提）
- 02_error_handling_implementation.md（前提）
- 05_navigation_implementation.md（統合）

## 技術的考慮事項
- ギャップバッファとの効率的な同期
- UTF-8文字境界での安全な操作
- 高速な連続入力への対応
- 将来のIME統合への準備
- メモリ効率と性能の最適化