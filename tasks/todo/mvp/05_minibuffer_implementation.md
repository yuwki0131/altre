# ミニバッファ実装

## タスク概要
Emacsスタイルのミニバッファとファイル操作コマンドを実装する。

## 目的
- ユーザーコマンドの入力受付
- ファイルパス補完機能の提供
- エラーメッセージの適切な表示
- 直感的な操作体験の実現

## 実装対象
1. **ミニバッファコア機能**
   - プロンプト表示
   - 文字列入力受付
   - 履歴管理（簡易版）
   - 入力キャンセル（C-g）

2. **ファイル操作コマンド**
   - `C-x C-f` (find-file) - ファイルを開く
   - `C-x C-s` (save-buffer) - ファイル保存
   - `C-x C-c` (save-buffers-kill-terminal) - 終了

3. **補完機能**
   - ファイルパス補完
   - `TAB` での補完実行
   - 候補表示
   - 部分一致での絞り込み

4. **エラーハンドリング**
   - ファイル読み込みエラー
   - 権限エラー
   - パス不正エラー
   - ユーザーフレンドリーなメッセージ

## テスト実装
1. **単体テスト**
   - ミニバッファ入力処理
   - 補完ロジックの正確性
   - エラーハンドリング

2. **統合テスト**
   - ファイルオープン→編集→保存の一連操作
   - 補完機能の動作確認

## 成果物
- `app/src/minibuffer/mod.rs`
- `app/src/minibuffer/completion.rs`
- `app/src/file/operations.rs`
- `app/tests/minibuffer_tests.rs`

## 前提条件
- 04_minibuffer_design.md の完了
- 04_tui_interface_implementation.md の完了
- 06_error_handling_design.md の完了

## 完了条件
- [ ] ミニバッファコア機能の実装完成
- [ ] ファイル操作コマンドの実装完成
- [ ] ファイルパス補完機能の実装完成
- [ ] エラーハンドリングの実装完成
- [ ] 全テストの成功

## 見積もり
**期間**: 3-4日
**優先度**: 高（ファイル操作必須）

## 関連タスク
- 04_minibuffer_design.md（前提）
- 06_file_operations_implementation.md（統合）

## 技術的考慮事項
- shellexpand クレートでのパス展開
- std::fs でのファイル操作
- タブ補完の効率的なアルゴリズム
- UTF-8 ファイル読み書きの安全性